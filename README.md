# Code that obtains VK tokens that work for VK audio API

Read this in [russian](README.ru.md).

This code makes it possible to obtain VK token, that works for VK audio API, so you can query audio URIs. The code was obtained through reversing Kate Mobile application. VK login, VK password, GMS ID and GMS token are needed. No additional dependencies are required.

See `example.php` to see how it can be used. This script obtains both GMS credentials and VK token. Just run it: `example.php login pass` and it will print the token.

There are two ways to obtain GMS credentials.

The first way is to get them from a rooted Android device. The token is in `/data/data/com.google.android.gsf/shared_prefs/CheckinService.xml` file and ID is in `/data/data/com.google.android.gms/shared_prefs/Checkin.xml` file. You can install [GMS Credentials](https://github.com/vodka2/gms-credentials) application to see them.

The second way is to perform Android Checkin yourself. Class `AndroidCheckin` is designed for this task. Currently you need a string that is generated by `com.google.ccc.abuse.droidguard` (the.apk) or you can perform the queries to the Google servers that are made by an Android device. One such string is in `example.php` file, not sure if it can expire. It is also possible to intercept Android Checkin request (it is made on first boot) and see the returned GMS ID and token.