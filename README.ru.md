# Код для получения токена VK по данным GMS

Код позволяет получить токен VK, который подходит для запрашивания URI аудиозаписей, по логину VK, паролю VK, GMS ID и GMS токену. Код получен в результате анализа приложения Kate Mobile. Никаких зависимостей устанавливать не требуется.

Пример получения токена находится в файле `example.php`. Также там находится код получения данных GMS (Checkin).

Вообще есть два способа получения данных GMS. 

Можно вытащить их из Android устройства с root, на котором установлены сервисы Google. Токен находится в `/data/data/com.google.android.gsf/shared_prefs/CheckinService.xml`, ID в `/data/data/com.google.android.gms/shared_prefs/Checkin.xml`. Можно установить на устройство приложение [GMS Credentials](https://github.com/vodka2/gms-credentials) посмотреть значения токена и ID.

Также можно самим получить эти данные GMS, сделав «правильный» Checkin. Для этого предназначен класс `AndroidCheckin`. К сожалению, полностью автоматически это сделать пока не удаётся, нужна строка, которую генерирует `com.google.ccc.abuse.droidguard` (the.apk), или нужно как-то повторить  запросы, которые делает устройство к серверам Google. Одна такая строка также приведена в `example.php`, не знаю, сколько раз с её помощью можно сделать Checkin.